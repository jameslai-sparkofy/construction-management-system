# 工程管理系統 - 用戶管理功能測試計畫

## 測試目標
確保用戶管理功能完整運作，包含資料載入、用戶新增、分類顯示等功能

## 測試範圍

### 1. 頁面初始載入測試
- [ ] 進入頁面時自動載入所有資料
  - [ ] 載入專案資訊
  - [ ] 載入工班列表
  - [ ] 載入專案成員
  - [ ] 載入管理員列表（預設顯示）

### 2. 管理員功能測試
- [ ] 管理員列表正確載入
- [ ] 可以選擇管理員
- [ ] 可以新增管理員到專案
- [ ] 管理員顯示在右側「管理員」區塊

### 3. 工班師父功能測試
- [ ] 顯示所有工班及正確的成員數量
- [ ] 點擊工班載入該工班成員
- [ ] 區分工班負責人與一般成員
- [ ] 可以選擇並新增師父到專案
- [ ] 新增師父功能（寫入 object_50HJ8__c）

### 4. 業主功能測試
- [ ] 業主列表載入
- [ ] 可以新增業主到專案
- [ ] 業主顯示在右側「業主」區塊

### 5. 右側專案成員列表測試
- [ ] 分頁顯示不同工班成員
- [ ] 正確顯示成員數量
- [ ] 可以移除成員
- [ ] 區分負責人與一般成員標記

### 6. 資料持久化測試
- [ ] 新增的用戶正確寫入 D1 資料庫
- [ ] 重新載入頁面後資料保持
- [ ] 刪除用戶後資料正確更新

## 測試步驟

### Step 1: 頁面載入測試
1. 開啟 user-management.html?project_id=xxx
2. 驗證所有區塊都有載入資料
3. 驗證沒有出現「載入中...」停滯

### Step 2: 管理員新增測試
1. 點擊「管理員」標籤
2. 選擇一個管理員
3. 點擊「添加選中的用戶」
4. 驗證右側管理員區塊更新

### Step 3: 工班師父新增測試
1. 點擊「師父」標籤
2. 選擇工班
3. 選擇師父（標記是否為負責人）
4. 點擊「添加選中的用戶」
5. 驗證右側工班成員區塊正確顯示

### Step 4: 新建師父測試
1. 點擊「+ 創建新師父」
2. 填寫師父資料
3. 驗證資料寫入 object_50HJ8__c
4. 驗證新師父出現在列表中

### Step 5: 分頁顯示測試
1. 驗證右側工班成員區有分頁
2. 切換不同工班分頁
3. 驗證每個分頁顯示正確的成員

## 預期結果
- 所有資料正確載入無錯誤
- 用戶可以順利新增到專案
- 右側列表正確分類顯示
- 工班成員有分頁且區分負責人
- 資料正確持久化到資料庫

## 修正項目清單
1. 頁面載入時自動載入所有資料（不需要點擊）
2. 修正管理員載入 API 端點
3. 實現右側工班成員分頁顯示
4. 區分工班負責人與一般成員
5. 實現新增師父到 object_50HJ8__c
6. 顯示正確的工班成員數量