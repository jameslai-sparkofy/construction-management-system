<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Admin - å…¨ç«™ç”¨æˆ¶ç®¡ç†</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-shadow {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .tab-active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .tab-inactive {
            background: #f8fafc;
            color: #64748b;
        }
        .role-badge {
            @apply inline-block px-2 py-1 text-xs font-medium rounded-full;
        }
        .role-super-admin {
            @apply bg-red-100 text-red-800;
        }
        .role-admin {
            @apply bg-blue-100 text-blue-800;
        }
        .role-owner {
            @apply bg-green-100 text-green-800;
        }
        .role-team-leader {
            @apply bg-purple-100 text-purple-800;
        }
        .role-member {
            @apply bg-gray-100 text-gray-800;
        }
        .role-user {
            @apply bg-yellow-100 text-yellow-800;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- å°èˆªæ¬„ -->
    <nav class="gradient-bg text-white p-4">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <div class="text-2xl font-bold">ğŸ—ï¸</div>
                <h1 class="text-xl font-bold">Super Admin - å…¨ç«™ç”¨æˆ¶ç®¡ç†</h1>
            </div>
            <div class="flex items-center space-x-4">
                <span id="userName" class="font-medium">è¼‰å…¥ä¸­...</span>
                <a href="project-list.html" class="bg-white bg-opacity-20 px-4 py-2 rounded-lg hover:bg-opacity-30 transition">
                    å›åˆ°å°ˆæ¡ˆåˆ—è¡¨
                </a>
                <button id="logoutBtn" class="bg-red-500 bg-opacity-80 px-4 py-2 rounded-lg hover:bg-opacity-100 transition">
                    ç™»å‡º
                </button>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto p-6">
        <!-- çµ±è¨ˆå¡ç‰‡ -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="bg-white rounded-lg card-shadow p-6">
                <div class="flex items-center">
                    <div class="text-3xl text-blue-500 mr-4">ğŸ‘¥</div>
                    <div>
                        <div class="text-2xl font-bold text-gray-800" id="totalUsers">0</div>
                        <div class="text-sm text-gray-600">ç¸½ç”¨æˆ¶æ•¸</div>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-lg card-shadow p-6">
                <div class="flex items-center">
                    <div class="text-3xl text-green-500 mr-4">ğŸ“‹</div>
                    <div>
                        <div class="text-2xl font-bold text-gray-800" id="totalProjects">0</div>
                        <div class="text-sm text-gray-600">ç¸½å°ˆæ¡ˆæ•¸</div>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-lg card-shadow p-6">
                <div class="flex items-center">
                    <div class="text-3xl text-purple-500 mr-4">ğŸ”§</div>
                    <div>
                        <div class="text-2xl font-bold text-gray-800" id="activeUsers">0</div>
                        <div class="text-sm text-gray-600">æ´»èºç”¨æˆ¶</div>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-lg card-shadow p-6">
                <div class="flex items-center">
                    <div class="text-3xl text-red-500 mr-4">âš ï¸</div>
                    <div>
                        <div class="text-2xl font-bold text-gray-800" id="pendingUsers">0</div>
                        <div class="text-sm text-gray-600">å¾…å•Ÿç”¨ç”¨æˆ¶</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- åˆ†é æ¨™ç±¤ -->
        <div class="bg-white rounded-lg card-shadow mb-6">
            <div class="flex border-b">
                <button id="usersTab" class="flex-1 py-4 px-6 text-center font-medium tab-active transition" onclick="showTab('users')">
                    ğŸ‘¥ ç”¨æˆ¶åˆ—è¡¨
                </button>
                <button id="rolesTab" class="flex-1 py-4 px-6 text-center font-medium tab-inactive transition" onclick="showTab('roles')">
                    ğŸ” è§’è‰²åˆ†æ
                </button>
                <button id="projectsTab" class="flex-1 py-4 px-6 text-center font-medium tab-inactive transition" onclick="showTab('projects')">
                    ğŸ“Š å°ˆæ¡ˆçµ±è¨ˆ
                </button>
            </div>
        </div>

        <!-- ç”¨æˆ¶åˆ—è¡¨é é¢ -->
        <div id="usersContent" class="tab-content">
            <div class="bg-white rounded-lg card-shadow">
                <div class="p-6 border-b">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-bold text-gray-800">æ‰€æœ‰ç”¨æˆ¶</h2>
                        <div class="flex space-x-4">
                            <input type="text" id="searchUsers" placeholder="æœå°‹ç”¨æˆ¶..." 
                                   class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <select id="filterRole" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">æ‰€æœ‰è§’è‰²</option>
                                <option value="super_admin">Super Admin</option>
                                <option value="admin">ç®¡ç†å“¡</option>
                                <option value="owner">æ¥­ä¸»</option>
                                <option value="team_leader">å·¥ç­é•·</option>
                                <option value="member">å·¥ç­æˆå“¡</option>
                                <option value="user">ä¸€èˆ¬ç”¨æˆ¶</option>
                            </select>
                            <select id="filterStatus" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">æ‰€æœ‰ç‹€æ…‹</option>
                                <option value="active">å·²å•Ÿç”¨</option>
                                <option value="pending">å¾…å•Ÿç”¨</option>
                                <option value="suspended">å·²æš«åœ</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="p-6">
                    <div id="usersTable" class="overflow-x-auto">
                        <div class="text-center py-8">
                            <div class="text-4xl mb-4">ğŸ“‹</div>
                            <p class="text-gray-500">è¼‰å…¥ä¸­...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- è§’è‰²åˆ†æé é¢ -->
        <div id="rolesContent" class="tab-content hidden">
            <div class="bg-white rounded-lg card-shadow p-6">
                <h2 class="text-xl font-bold text-gray-800 mb-6">è§’è‰²åˆ†ä½ˆåˆ†æ</h2>
                <div id="roleAnalysis" class="space-y-4">
                    <div class="text-center py-8">
                        <div class="text-4xl mb-4">ğŸ“Š</div>
                        <p class="text-gray-500">è¼‰å…¥ä¸­...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- å°ˆæ¡ˆçµ±è¨ˆé é¢ -->
        <div id="projectsContent" class="tab-content hidden">
            <div class="bg-white rounded-lg card-shadow p-6">
                <h2 class="text-xl font-bold text-gray-800 mb-6">å°ˆæ¡ˆç”¨æˆ¶çµ±è¨ˆ</h2>
                <div id="projectStats" class="space-y-4">
                    <div class="text-center py-8">
                        <div class="text-4xl mb-4">ğŸ“ˆ</div>
                        <p class="text-gray-500">è¼‰å…¥ä¸­...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- æˆåŠŸ/éŒ¯èª¤è¨Šæ¯ -->
        <div id="messageContainer" class="fixed top-4 right-4 z-50"></div>
    </div>

    <script src="config.js"></script>
    <script src="js/unified-auth.js"></script>
    <script>
        let currentUser = null;
        let allUsers = [];
        let allProjects = [];

        // é é¢è¼‰å…¥æ™‚åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', async function() {
            // æª¢æŸ¥èªè­‰
            if (!window.UnifiedAuth.requireAuth()) {
                return;
            }

            currentUser = window.UnifiedAuth.getUser();
            if (currentUser) {
                document.getElementById('userName').textContent = currentUser.name || currentUser.phone;
            }

            // æª¢æŸ¥ Super Admin æ¬Šé™
            if (!currentUser || currentUser.role !== 'super_admin') {
                showMessage('æ‚¨æ²’æœ‰æ¬Šé™å­˜å–æ­¤é é¢', 'error');
                setTimeout(() => {
                    window.location.href = 'project-list.html';
                }, 2000);
                return;
            }

            // è¼‰å…¥è³‡æ–™
            await loadAllData();
            
            // ç¶å®šäº‹ä»¶
            bindEvents();
        });

        // è¼‰å…¥æ‰€æœ‰è³‡æ–™
        async function loadAllData() {
            try {
                await Promise.all([
                    loadAllUsers(),
                    loadAllProjects(),
                    loadStatistics()
                ]);
            } catch (error) {
                console.error('è¼‰å…¥è³‡æ–™å¤±æ•—:', error);
                showMessage('è¼‰å…¥è³‡æ–™å¤±æ•—', 'error');
            }
        }

        // è¼‰å…¥æ‰€æœ‰ç”¨æˆ¶
        async function loadAllUsers() {
            try {
                const response = await fetch(`${CONFIG.API.WORKER_API_URL}/api/v1/admin/users`, {
                    headers: window.UnifiedAuth.getRequestHeaders()
                });

                const data = await response.json();
                
                if (data.success) {
                    allUsers = data.users || [];
                    renderUsersTable(allUsers);
                } else {
                    showMessage('è¼‰å…¥ç”¨æˆ¶è³‡æ–™å¤±æ•—ï¼š' + data.error, 'error');
                }
            } catch (error) {
                console.error('è¼‰å…¥ç”¨æˆ¶è³‡æ–™éŒ¯èª¤:', error);
                showMessage('è¼‰å…¥ç”¨æˆ¶è³‡æ–™ç™¼ç”ŸéŒ¯èª¤', 'error');
            }
        }

        // è¼‰å…¥æ‰€æœ‰å°ˆæ¡ˆ
        async function loadAllProjects() {
            try {
                const response = await fetch(`${CONFIG.API.WORKER_API_URL}/api/v1/admin/projects`, {
                    headers: window.UnifiedAuth.getRequestHeaders()
                });

                const data = await response.json();
                
                if (data.success) {
                    allProjects = data.projects || [];
                } else {
                    showMessage('è¼‰å…¥å°ˆæ¡ˆè³‡æ–™å¤±æ•—ï¼š' + data.error, 'error');
                }
            } catch (error) {
                console.error('è¼‰å…¥å°ˆæ¡ˆè³‡æ–™éŒ¯èª¤:', error);
                showMessage('è¼‰å…¥å°ˆæ¡ˆè³‡æ–™ç™¼ç”ŸéŒ¯èª¤', 'error');
            }
        }

        // è¼‰å…¥çµ±è¨ˆè³‡æ–™
        async function loadStatistics() {
            try {
                // æ›´æ–°çµ±è¨ˆæ•¸å­—
                document.getElementById('totalUsers').textContent = allUsers.length;
                document.getElementById('totalProjects').textContent = allProjects.length;
                document.getElementById('activeUsers').textContent = allUsers.filter(u => u.user_status === 'active').length;
                document.getElementById('pendingUsers').textContent = allUsers.filter(u => u.user_status === 'pending').length;
                
            } catch (error) {
                console.error('è¼‰å…¥çµ±è¨ˆè³‡æ–™éŒ¯èª¤:', error);
            }
        }

        // æ¸²æŸ“ç”¨æˆ¶è¡¨æ ¼
        function renderUsersTable(users) {
            const container = document.getElementById('usersTable');
            
            if (users.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-8">
                        <div class="text-4xl mb-4">ğŸ“­</div>
                        <p class="text-gray-500">æ²’æœ‰æ‰¾åˆ°ç”¨æˆ¶</p>
                    </div>
                `;
                return;
            }

            const tableHtml = `
                <table class="min-w-full">
                    <thead>
                        <tr class="border-b">
                            <th class="text-left py-3 px-4 font-medium text-gray-700">ç”¨æˆ¶è³‡è¨Š</th>
                            <th class="text-left py-3 px-4 font-medium text-gray-700">è§’è‰²</th>
                            <th class="text-left py-3 px-4 font-medium text-gray-700">ç‹€æ…‹</th>
                            <th class="text-left py-3 px-4 font-medium text-gray-700">å°ˆæ¡ˆè§’è‰²</th>
                            <th class="text-left py-3 px-4 font-medium text-gray-700">æœ€å¾Œç™»å…¥</th>
                            <th class="text-left py-3 px-4 font-medium text-gray-700">æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${users.map(user => `
                            <tr class="border-b hover:bg-gray-50">
                                <td class="py-3 px-4">
                                    <div>
                                        <div class="font-medium text-gray-900">${user.name || 'æœªè¨­å®š'}</div>
                                        <div class="text-sm text-gray-600">${user.phone}</div>
                                        ${user.email ? `<div class="text-sm text-gray-600">${user.email}</div>` : ''}
                                    </div>
                                </td>
                                <td class="py-3 px-4">
                                    <span class="role-badge role-${user.role}">${getRoleDisplayName(user.role)}</span>
                                </td>
                                <td class="py-3 px-4">
                                    <span class="px-2 py-1 text-xs font-medium rounded-full ${getStatusColor(user.user_status)}">
                                        ${getStatusDisplayName(user.user_status)}
                                    </span>
                                </td>
                                <td class="py-3 px-4">
                                    <button onclick="showUserProjectRoles('${user.user_id}')" class="text-blue-600 hover:text-blue-800 text-sm">
                                        æŸ¥çœ‹è©³æƒ…
                                    </button>
                                </td>
                                <td class="py-3 px-4 text-sm text-gray-600">
                                    ${formatDateTime(user.last_login)}
                                </td>
                                <td class="py-3 px-4">
                                    <div class="flex space-x-2">
                                        <button onclick="editUser('${user.user_id}')" class="text-blue-600 hover:text-blue-800 text-sm">
                                            ç·¨è¼¯
                                        </button>
                                        ${user.role !== 'super_admin' ? `
                                            <button onclick="toggleUserStatus('${user.user_id}')" class="text-red-600 hover:text-red-800 text-sm">
                                                ${user.user_status === 'active' ? 'åœç”¨' : 'å•Ÿç”¨'}
                                            </button>
                                        ` : ''}
                                    </div>
                                </td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;

            container.innerHTML = tableHtml;
        }

        // é¡¯ç¤ºåˆ†é 
        function showTab(tabName) {
            // éš±è—æ‰€æœ‰å…§å®¹
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // ç§»é™¤æ‰€æœ‰æ´»å‹•æ¨™ç±¤æ¨£å¼
            document.querySelectorAll('[id$="Tab"]').forEach(tab => {
                tab.className = 'flex-1 py-4 px-6 text-center font-medium tab-inactive transition';
            });
            
            // é¡¯ç¤ºé¸ä¸­çš„å…§å®¹
            document.getElementById(tabName + 'Content').classList.remove('hidden');
            document.getElementById(tabName + 'Tab').className = 'flex-1 py-4 px-6 text-center font-medium tab-active transition';
            
            // è¼‰å…¥å°æ‡‰çš„è³‡æ–™
            if (tabName === 'roles') {
                loadRoleAnalysis();
            } else if (tabName === 'projects') {
                loadProjectStats();
            }
        }

        // è¼‰å…¥è§’è‰²åˆ†æ
        function loadRoleAnalysis() {
            const container = document.getElementById('roleAnalysis');
            
            const roleStats = {};
            allUsers.forEach(user => {
                roleStats[user.role] = (roleStats[user.role] || 0) + 1;
            });

            const html = Object.entries(roleStats).map(([role, count]) => `
                <div class="flex justify-between items-center p-4 border rounded-lg">
                    <div class="flex items-center">
                        <span class="role-badge role-${role} mr-3">${getRoleDisplayName(role)}</span>
                    </div>
                    <div class="text-xl font-bold text-gray-800">${count} äºº</div>
                </div>
            `).join('');

            container.innerHTML = html;
        }

        // è¼‰å…¥å°ˆæ¡ˆçµ±è¨ˆ
        function loadProjectStats() {
            const container = document.getElementById('projectStats');
            
            const html = allProjects.map(project => `
                <div class="border rounded-lg p-4">
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="font-medium text-gray-900">${project.name}</h3>
                        <span class="text-sm text-gray-600">${project.project_status}</span>
                    </div>
                    <div class="text-sm text-gray-600">
                        ç”¨æˆ¶æ•¸: ${project.user_count || 0} äºº
                    </div>
                </div>
            `).join('');

            container.innerHTML = html || '<p class="text-gray-500">æš«ç„¡å°ˆæ¡ˆè³‡æ–™</p>';
        }

        // ç¶å®šäº‹ä»¶
        function bindEvents() {
            // æœå°‹å’Œç¯©é¸
            document.getElementById('searchUsers').addEventListener('input', filterUsers);
            document.getElementById('filterRole').addEventListener('change', filterUsers);
            document.getElementById('filterStatus').addEventListener('change', filterUsers);

            // ç™»å‡ºæŒ‰éˆ•
            document.getElementById('logoutBtn').addEventListener('click', function() {
                if (confirm('ç¢ºå®šè¦ç™»å‡ºå—ï¼Ÿ')) {
                    window.UnifiedAuth.logout();
                    window.location.href = 'index.html';
                }
            });
        }

        // ç¯©é¸ç”¨æˆ¶
        function filterUsers() {
            const searchTerm = document.getElementById('searchUsers').value.toLowerCase();
            const roleFilter = document.getElementById('filterRole').value;
            const statusFilter = document.getElementById('filterStatus').value;

            const filteredUsers = allUsers.filter(user => {
                const matchSearch = !searchTerm || 
                    user.name?.toLowerCase().includes(searchTerm) ||
                    user.phone?.toLowerCase().includes(searchTerm) ||
                    user.email?.toLowerCase().includes(searchTerm);
                
                const matchRole = !roleFilter || user.role === roleFilter;
                const matchStatus = !statusFilter || user.user_status === statusFilter;

                return matchSearch && matchRole && matchStatus;
            });

            renderUsersTable(filteredUsers);
        }

        // é¡¯ç¤ºç”¨æˆ¶å°ˆæ¡ˆè§’è‰²
        async function showUserProjectRoles(userId) {
            try {
                const response = await fetch(`${CONFIG.API.WORKER_API_URL}/api/v1/admin/users/${userId}/projects`, {
                    headers: window.UnifiedAuth.getRequestHeaders()
                });

                const data = await response.json();
                
                if (data.success) {
                    const projects = data.projects || [];
                    let content = `
                        <div class="max-w-2xl mx-auto">
                            <h3 class="text-lg font-bold mb-4">ç”¨æˆ¶å°ˆæ¡ˆè§’è‰²</h3>
                            ${projects.length === 0 ? 
                                '<p class="text-gray-500">æ­¤ç”¨æˆ¶å°šæœªåƒèˆ‡ä»»ä½•å°ˆæ¡ˆ</p>' :
                                projects.map(project => `
                                    <div class="border rounded-lg p-3 mb-2">
                                        <div class="font-medium">${project.project_name}</div>
                                        <div class="text-sm text-gray-600">
                                            è§’è‰²: ${getUserTypeDisplayName(project.user_role)}
                                            ${project.team_name ? ` | å·¥ç­: ${project.team_name}` : ''}
                                        </div>
                                    </div>
                                `).join('')
                            }
                        </div>
                    `;
                    
                    // é€™è£¡å¯ä»¥ç”¨ modal é¡¯ç¤ºï¼Œæš«æ™‚ç”¨ alert
                    alert(projects.map(p => `${p.project_name}: ${getUserTypeDisplayName(p.user_role)}`).join('\n') || 'å°šæœªåƒèˆ‡ä»»ä½•å°ˆæ¡ˆ');
                } else {
                    showMessage('è¼‰å…¥ç”¨æˆ¶å°ˆæ¡ˆè§’è‰²å¤±æ•—ï¼š' + data.error, 'error');
                }
            } catch (error) {
                console.error('è¼‰å…¥ç”¨æˆ¶å°ˆæ¡ˆè§’è‰²éŒ¯èª¤:', error);
                showMessage('è¼‰å…¥ç”¨æˆ¶å°ˆæ¡ˆè§’è‰²ç™¼ç”ŸéŒ¯èª¤', 'error');
            }
        }

        // ç·¨è¼¯ç”¨æˆ¶
        function editUser(userId) {
            // TODO: å¯¦ç¾ç”¨æˆ¶ç·¨è¼¯åŠŸèƒ½
            showMessage('ç·¨è¼¯åŠŸèƒ½é–‹ç™¼ä¸­', 'info');
        }

        // åˆ‡æ›ç”¨æˆ¶ç‹€æ…‹
        async function toggleUserStatus(userId) {
            const user = allUsers.find(u => u.user_id === userId);
            if (!user) return;

            const newStatus = user.user_status === 'active' ? 'suspended' : 'active';
            const action = newStatus === 'active' ? 'å•Ÿç”¨' : 'åœç”¨';

            if (!confirm(`ç¢ºå®šè¦${action}ç”¨æˆ¶ ${user.name || user.phone} å—ï¼Ÿ`)) {
                return;
            }

            try {
                const response = await fetch(`${CONFIG.API.WORKER_API_URL}/api/v1/admin/users/${userId}/status`, {
                    method: 'PUT',
                    headers: window.UnifiedAuth.getRequestHeaders(),
                    body: JSON.stringify({ status: newStatus })
                });

                const data = await response.json();
                
                if (data.success) {
                    showMessage(`ç”¨æˆ¶${action}æˆåŠŸ`, 'success');
                    await loadAllUsers(); // é‡æ–°è¼‰å…¥ç”¨æˆ¶åˆ—è¡¨
                } else {
                    showMessage(`${action}ç”¨æˆ¶å¤±æ•—ï¼š` + data.error, 'error');
                }
            } catch (error) {
                console.error(`${action}ç”¨æˆ¶éŒ¯èª¤:`, error);
                showMessage(`${action}ç”¨æˆ¶ç™¼ç”ŸéŒ¯èª¤`, 'error');
            }
        }

        // é¡¯ç¤ºè¨Šæ¯
        function showMessage(message, type = 'info') {
            const container = document.getElementById('messageContainer');
            const colors = {
                success: 'bg-green-500',
                error: 'bg-red-500',
                info: 'bg-blue-500'
            };

            const messageEl = document.createElement('div');
            messageEl.className = `${colors[type]} text-white px-6 py-3 rounded-lg shadow-lg mb-4 max-w-sm`;
            messageEl.textContent = message;

            container.appendChild(messageEl);

            setTimeout(() => {
                messageEl.remove();
            }, 5000);
        }

        // è¼”åŠ©å‡½æ•¸
        function getRoleDisplayName(role) {
            const roleNames = {
                'super_admin': 'Super Admin',
                'admin': 'ç®¡ç†å“¡',
                'user': 'ä¸€èˆ¬ç”¨æˆ¶',
                'owner': 'æ¥­ä¸»',
                'team_leader': 'å·¥ç­é•·',
                'member': 'å·¥ç­æˆå“¡'
            };
            return roleNames[role] || role;
        }

        function getUserTypeDisplayName(userType) {
            const typeNames = {
                'admin': 'ç®¡ç†å“¡',
                'owner': 'æ¥­ä¸»',
                'worker': 'å·¥ç­'
            };
            return typeNames[userType] || userType;
        }

        function getStatusDisplayName(status) {
            const statusNames = {
                'active': 'å·²å•Ÿç”¨',
                'pending': 'å¾…å•Ÿç”¨',
                'suspended': 'å·²æš«åœ'
            };
            return statusNames[status] || status;
        }

        function getStatusColor(status) {
            const colors = {
                'active': 'bg-green-100 text-green-800',
                'pending': 'bg-yellow-100 text-yellow-800',
                'suspended': 'bg-red-100 text-red-800'
            };
            return colors[status] || 'bg-gray-100 text-gray-800';
        }

        function formatDateTime(dateStr) {
            if (!dateStr) return 'ç„¡';
            return new Date(dateStr).toLocaleString('zh-TW');
        }
    </script>
</body>
</html>